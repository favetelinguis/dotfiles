# https://github.com/greyltc-org/docker-archlinux-aur
FROM ghcr.io/greyltc-org/archlinux-aur:paru

# git is installed from base
RUN aur-install \
    emacs-nativecomp \
    mise-bin \
    github-cli \
    babashka-bin \
    # For clojure-mode emacs
    cljfmt-bin \
    # For clojure-mode emacs
    clj-kondo-bin \
    # For clojure-mode emacs
    clojure-lsp-bin \
    # For Emacs vterm
    cmake \
    # For Doom emacs
    ripgrep \
    # For Doom emacs
    fd \
    # For clj command
    rlwrap \
    # For Emacs org mode to show graphs
    graphviz \
    # For Emacs to render plantuml in org files
    plantuml \
    # Dotfile manager
    chezmoi

# Setup Doom Emacs commands
ENV PATH="~/.config/emacs/bin:$PATH"
# Setup Mise shims
ENV PATH="~/.local/share/mise/shims:$PATH"

# Share some commands with host
RUN ln -fs /usr/bin/distrobox-host-exec /usr/bin/podman
RUN ln -fs /usr/bin/distrobox-host-exec /usr/bin/distrobox
RUN ln -fs /usr/bin/distrobox-host-exec /usr/bin/flatpak
